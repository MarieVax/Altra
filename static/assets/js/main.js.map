{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["/*******************************************************************************\n\n  Project: EDGEEMPOWER\n  Author:  WHAT.DIGITAL\n  Date:    PROJECT_DATE\n\n********************************************************************************\n\nTOC:\n  Fix \"Does not use passive listeners to improve scrolling performance\" issue in the PageSpeed Insights\n  \n  jQuery document ready start\n  Dropdown Menu\n  Map\n  Equal Heights\n  AJAX Load More\n  jQuery document ready end\n\n*******************************************************************************/\n\n// Fix \"Does not use passive listeners to improve scrolling performance\" issue in the PageSpeed Insights\n\njQuery.event.special.touchstart = {\n  setup: function( _, ns, handle ) {\n      this.addEventListener(\"touchstart\", handle, { passive: !ns.includes(\"noPreventDefault\") });\n  }\n};\n\njQuery.event.special.touchmove = {\n  setup: function( _, ns, handle ) {\n      this.addEventListener(\"touchmove\", handle, { passive: !ns.includes(\"noPreventDefault\") });\n  }\n};\n\njQuery.event.special.wheel = {\n  setup: function( _, ns, handle ){\n      this.addEventListener(\"wheel\", handle, { passive: true });\n  }\n};\n\njQuery.event.special.mousewheel = {\n  setup: function( _, ns, handle ){\n      this.addEventListener(\"mousewheel\", handle, { passive: true });\n  }\n};\n\njQuery( document ).ready(function($) {\n\n/* Dropdown Menu\n------------------------------------------------------------------------------*/\n\n if($('.c-hor-menu').length) {\n    $('.c-hor-menu .menu-item-has-children > a').on('click', function(e){\n      e.preventDefault();\n      if(!$(this).parent().hasClass('opened')) {\n        $(this).closest('.c-hor-menu').find('.opened').removeClass('opened');\n        $(this).parent().addClass('opened');\n      }\n      else {\n        $(this).parent().removeClass('opened');\n      }\n    });\n  }\n\n  // Hide dropdown after click outside the menu\n  $(document).on('click', function(event) {\n    if (!$(event.target).closest('.c-hor-menu .menu-item-has-children a').length) {\n      $('.c-hor-menu .menu-item-has-children').removeClass('opened');\n    }\n  }); \n\n/* Map\n/*******************************************************************************/\n\n  $.each($('.dyn-map'), function(){\n\n    var lat = $(this).data('lat');\n    var long = $(this).data('long');\n    var zoom = $(this).data('zoom');\n\n    L.Icon.Default.imagePath = theme_settings.template_dir + '/assets/img/leaflet/';\n    var mymap = new L.map($(this)[0], {\n    scrollWheelZoom: false\n    }).setView([lat, long], 16);\n\n    // create custom icon\n    var pinIcon = L.icon({\n        iconUrl: theme_settings.template_dir + '/assets/img/leaflet/pin.svg',\n        shadowUrl:  theme_settings.template_dir + '/assets/img/leaflet/marker-shadow.png',\n        iconSize: [40, 50], // size of the icon\n        iconAnchor:   [16, 50],\n        shadowAnchor: [10, 39],\n        popupAnchor:  [5, -48]\n    });\n\n    // Open Street Map\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n        maxZoom: zoom\n    }).addTo(mymap);\n\n    if($(this).data('popup')) {\n      L.marker([lat, long], {icon: pinIcon}).addTo(mymap)\n      .bindPopup($(this).data('popup'))\n      .openPopup();\n    }\n\n    // Open Street Map - Wikimedia\n    // L.tileLayer('https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png', {\n    //     attribution: '<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>',\n    //     maxZoom: zoom\n    // }).addTo(mymap);\n\n    // Open Street Map - Black and White\n    /*\n    L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n        maxZoom: zoom\n    }).addTo(mymap);\n    */\n\n    // Mapbox - remember to change accessToken\n    /*\n    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\n        attribution: 'Map data © <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n        maxZoom: zoom,\n        id: 'mapbox.streets',\n        accessToken: 'pk.eyJ1IjoiYWRhbXBpbGNoIiwiYSI6ImNqbTY0aGlzeTB0eTEza280dGVpcjVnemMifQ.zZjr5GSWWpe4lYGBjvuz1A'\n    }).addTo(mymap);\n    */\n\n    mymap.on('click', function() {\n    if (mymap.scrollWheelZoom.enabled()) {\n      mymap.scrollWheelZoom.disable();\n      }\n      else {\n      mymap.scrollWheelZoom.enable();\n      }\n    });\n\n  });\n\n/* Equal Heights\n------------------------------------------------------------------------------*/\n\n  // Example:\n  // $('.something').matchHeight();\n\n  // Match Height compatibility with Lazy Load techniques\n  // In most cases this code is not required if all images have width and haight dimmensions provided\n  // function refreshMatchHeight() {\n  //   $.fn.matchHeight._update();\n  // }\n  // $('img').on('load', throttle(refreshMatchHeight, 1000));\n\n/* AJAX Load More\n------------------------------------------------------------------------------*/\n\n  $('.js-load-more').click(function(){\n    var button = $(this);\n    var content_place = $(this).parent();\n    var data = {\n      'action': 'ajax_load_more',\n      'query': theme_settings.posts,\n      'page' : theme_settings.current_page\n    };\n\n    if (!(button.hasClass('c-btn--post-loading-loader') || button.hasClass('c-btn--post-no-more-posts'))) {\n\n      $.ajax({\n        url : theme_settings.ajaxurl,\n        data : data,\n        type : 'POST',\n        beforeSend : function ( xhr ) {\n          button.addClass('c-btn--post-loading-loader').find('span').html(theme_settings.loading);\n        },\n        success : function( data ){\n          var tempScrollTop = $(window).scrollTop();\n          if( data.length ) {\n            button.removeClass('c-btn--post-loading-loader').find('span').html(theme_settings.loadmore);\n            $(data).insertBefore(content_place);\n            theme_settings.current_page++;\n\n            if ( theme_settings.current_page == theme_settings.max_page )\n              button.removeClass('c-btn--post-loading-loader').addClass('c-btn--post-no-more-posts').find('span').html(theme_settings.noposts);\n          } else {\n            button.removeClass('c-btn--post-loading-loader').addClass('c-btn--post-no-more-posts').find('span').html(theme_settings.noposts);\n          }\n          $(window).scrollTop(tempScrollTop);\n        }\n      });\n    }\n  });\n\n}); // end of jQuery code"],"file":"main.js"}